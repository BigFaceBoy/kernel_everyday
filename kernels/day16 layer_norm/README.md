# LayerNorm
- layer_norm_f32_kernel
- layer_norm_f32x4_kernel
- layer_norm_f16_f16_kernel
- layer_norm_f16x2_f16_kernel
- layer_norm_f16x8_f16_kernel
- layer_norm_f16x8_pack_f16_kernel
- layer_norm_f16x8_pack_f32_kernel
- layer_norm_f16_f32_kernel

计算公式：

$$
\mu = \frac{1}{N}\sum^N_{i=1}x_i $$
$$\sigma^2 = \frac{1}{N}\sum^N_{i=1}(x_i - \mu)^2 $$
$$LayerNorm(x_i) = \frac{x_i - \mu}{\sqrt{\sigma^2 + \epsilon}} * g + b
$$

# benchmark
-------------------------------------------------------------------------------------
                                        N=4096, K=512
-------------------------------------------------------------------------------------
          out_f32: ['0.73832422  ', '0.66096157  ', '0.0987428   '], time:0.01999640ms
        out_f32x4: ['0.73832422  ', '0.66096157  ', '0.0987428   '], time:0.01132035ms
       out_f32_th: ['0.7376067   ', '0.66031921  ', '0.09864683  '], time:0.12899065ms
-------------------------------------------------------------------------------------
       out_f16f16: ['0.73828125  ', '0.66113281  ', '0.09869385  '], time:0.01992917ms
       out_f16f32: ['0.73828125  ', '0.66064453  ', '0.09875488  '], time:0.01989698ms
     out_f16x2f16: ['0.73828125  ', '0.66113281  ', '0.09869385  '], time:0.01368952ms
     out_f16x8f16: ['0.73828125  ', '0.66113281  ', '0.09875488  '], time:0.01092172ms
 out_f16x8packf16: ['0.73828125  ', '0.66113281  ', '0.09875488  '], time:0.00963521ms
 out_f16x8packf32: ['0.73828125  ', '0.66064453  ', '0.09875488  '], time:0.00961208ms
       out_f16_th: ['0.73730469  ', '0.66015625  ', '0.09869385  '], time:0.11976123ms
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
                                        N=4096, K=1024
-------------------------------------------------------------------------------------
          out_f32: ['-0.19677092 ', '-0.02944309 ', '0.02095805  '], time:0.04175735ms
        out_f32x4: ['-0.19677094 ', '-0.02944309 ', '0.02095805  '], time:0.01481748ms
       out_f32_th: ['-0.19667581 ', '-0.02942886 ', '0.02094791  '], time:0.14719796ms
-------------------------------------------------------------------------------------
       out_f16f16: ['-0.19677734 ', '-0.02941895 ', '0.02098083  '], time:0.04368758ms
       out_f16f32: ['-0.19677734 ', '-0.02944946 ', '0.02096558  '], time:0.04141784ms
     out_f16x2f16: ['-0.19689941 ', '-0.02946472 ', '0.02098083  '], time:0.02030802ms
     out_f16x8f16: ['-0.19677734 ', '-0.0294342  ', '0.02096558  '], time:0.01369143ms
 out_f16x8packf16: ['-0.19677734 ', '-0.0294342  ', '0.02096558  '], time:0.00952864ms
 out_f16x8packf32: ['-0.19677734 ', '-0.02944946 ', '0.02096558  '], time:0.00958514ms
       out_f16_th: ['-0.19665527 ', '-0.02944946 ', '0.02095032  '], time:0.13277650ms
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
                                        N=4096, K=2048
-------------------------------------------------------------------------------------
        out_f32x4: ['1.87103844  ', '0.81916875  ', '-1.6795671  '], time:0.02245665ms
       out_f32_th: ['1.87059081  ', '0.81897277  ', '-1.67916524 '], time:0.20165706ms
-------------------------------------------------------------------------------------
     out_f16x2f16: ['1.87109375  ', '0.81884766  ', '-1.68066406 '], time:0.04560590ms
     out_f16x8f16: ['1.87109375  ', '0.81933594  ', '-1.68066406 '], time:0.02209568ms
 out_f16x8packf16: ['1.87109375  ', '0.81933594  ', '-1.68066406 '], time:0.00954962ms
 out_f16x8packf32: ['1.87109375  ', '0.81884766  ', '-1.6796875  '], time:0.00958848ms
       out_f16_th: ['1.86914062  ', '0.81835938  ', '-1.67871094 '], time:0.15824056ms
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
                                        N=4096, K=4096
-------------------------------------------------------------------------------------
        out_f32x4: ['0.42482388  ', '0.7106759   ', '1.33242869  '], time:0.19196415ms
       out_f32_th: ['0.42477402  ', '0.71059251  ', '1.33227229  '], time:0.79533362ms
-------------------------------------------------------------------------------------
     out_f16x8f16: ['0.42504883  ', '0.71044922  ', '1.33300781  '], time:0.04546237ms
 out_f16x8packf16: ['0.42504883  ', '0.71044922  ', '1.33300781  '], time:0.00977373ms
 out_f16x8packf32: ['0.42504883  ', '0.71044922  ', '1.33300781  '], time:0.00979090ms
       out_f16_th: ['0.42504883  ', '0.7109375   ', '1.33300781  '], time:0.22427177ms
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
                                        N=4096, K=8192
-------------------------------------------------------------------------------------
     out_f16x8f16: ['-1.23925781 ', '-1.18652344 ', '0.93408203  '], time:0.19832206ms
 out_f16x8packf16: ['-1.64453125 ', '-1.59570312 ', '0.39941406  '], time:0.01373649ms
 out_f16x8packf32: ['-1.4140625  ', '-1.4140625  ', '-1.4140625  '], time:0.01365209ms
       out_f16_th: ['-1.23925781 ', '-1.18652344 ', '0.93408203  '], time:0.88122416ms
-------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------
                                        N=8192, K=8192
-------------------------------------------------------------------------------------
     out_f16x8f16: ['-0.19287109 ', '-0.45141602 ', '-1.29199219 '], time:0.39266562ms
 out_f16x8packf16: ['-0.19287109 ', '-0.45141602 ', '-1.29199219 '], time:0.02023077ms
 out_f16x8packf32: ['-0.19287109 ', '-0.45117188 ', '-1.29101562 '], time:0.02021837ms
       out_f16_th: ['-0.19287109 ', '-0.45141602 ', '-1.29199219 '], time:2.08272552ms
-------------------------------------------------------------------------------------

f16x8packf16 和 f16x8packf32还是存在问题，待排查